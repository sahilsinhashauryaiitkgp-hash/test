<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
    <title>Valentine Letter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Aldrich&family=Pixelify+Sans:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <title>Document</title>
  </head>
  <body>
    <!-- Envelope Screen -->
    <div id="envelope-container">
      <img src="envelope.png" alt="Envelope" id="envelope" />
      <p>♡ Letter for Miss Deori ♡</p>
    </div>

    <!-- Letter Screen -->
    <div id="letter-container">
      <div class="letter-window">
        <h1 id="letter-title">Will you be my Valentine?</h1>

        <!-- GIF playlist template:
             - Add/remove filenames in data-gifs (comma-separated)
             - data-gif-ms controls how long each GIF stays before switching -->
        <img
          src="cat_heart.gif"
          class="cat"
          id="letter-cat"
          data-gifs="cat_heart.gif, cat_heart.gif"
          data-gif-ms="2500"
        />

        <script>
          (() => {
            const img = document.getElementById("letter-cat");
            if (!img) return;

            const gifs = (img.dataset.gifs || "")
              .split(",")
              .map((s) => s.trim())
              .filter(Boolean);
            if (gifs.length <= 1) return;

            const delayMs = Number(img.dataset.gifMs) || 2500;
            let i = 0;

            // Cache-bust so the GIF restarts when re-selected.
            const setGif = (src) => {
              const sep = src.includes("?") ? "&" : "?";
              img.src = `${src}${sep}v=${Date.now()}`;
            };

            setGif(gifs[0]);
            window.setInterval(() => {
              i = (i + 1) % gifs.length;
              setGif(gifs[i]);
            }, delayMs);
          })();
        </script>

        <div class="buttons" id="letter-buttons">
          <img src="yes.png" class="btn yes-btn" alt="Yes" />

          <div class="no-wrapper">
            <img src="no.png" class="btn no-btn" alt="No" />
          </div>
        </div>

        <p id="final-text" class="final-text" style="display: none">
          <strong>Valentine Date:</strong> Meow Restaurant at 7pm. Dress fancy!
        </p>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
